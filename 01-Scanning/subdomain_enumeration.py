# TODO : Improvement : Use DNS requests to enumerate potential subdomains


import requests, sys, argparse, logging
from pathlib import Path

def readfile(path):
    file = Path(path)
    wordlists = file.open().readlines()
    return wordlists

def makeRequests(url, word, tls):
    httpType = 'https' if tls=='True' else 'http'
    requestUrl = httpType+'://'+word+'.'+url
    try:
        result = requests.get(requestUrl)
    except requests.ConnectionError:
        pass
    else:
        print("Valid domain: ", requestUrl)

def start():
    args = parser()
    wordlists = readfile(args.wdPath)
    for word in wordlists:
       makeRequests(args.url, word.strip(), args.tls)
       

def parser():
    print("tmp cheat code : \n for workdlist : ../wordlist/subdomains/subdomains-1000.txt \n")
    parser = argparse.ArgumentParser(description='Subdomain Enumerator.')

    parser.add_argument('-wd-path', dest='wdPath', help='WordList Path', required=True)
    parser.add_argument('-url', dest='url', help='domain url', required=True)
    parser.add_argument('--https', dest='tls', help='https True or False?', default='True')

    return parser.parse_args()

start()
